!function(a){a.fn.modallery=function(b){var c=0,d=1,f=a.extend({title:"Image Gallery",caller:".modallery",size:"",navigate:!1,arrows:!1,keypress:!1},b);if(a("body").append('<div class="modal fade" id="mdlyModal" tabindex="-1" role="dialog" aria-labelledby="mdlyLabel"><div class="modal-dialog" id="mdlyDialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;<span></button><h4 class="modal-title" id="mdlyLabel"></h4></div><div class="modal-body"><img id="modallery-img" class="img-responsive center-block" /><p class="text-center" id="modallery-caption"></p></div><div id="mdlyFooter"></div></div></div></div>'),""!==f.size&&(console.log("modal_"+f.size),a("#mdlyDialog").addClass("modal-"+f.size)),f.navigate&&(a("#mdlyFooter").addClass("panel-footer"),a(f.caller).each(function(){var b='<button class="btn btn-default navigator-btn" data-ref="'+a(this).data("to")+'" data-code='+d+'><img src="'+a(this).attr("src")+'" class="img-responsive" /></button>';a("#mdlyFooter").append(b),d++}),f.arrows)){var g=a("#mdlyFooter").html();a("#mdlyFooter").html('<div class="row"><div class="col-md-2"><button class="btn btn-primary" id="previousMdly">«</button></div><div class="col-md-8">'+g+'</div><div class="col-md-2"><button class="btn btn-primary" id="nextMdly">»</button></div></div>')}a(f.caller).click(function(){a("#mdlyLabel").html(f.title),a("#modallery-img").attr("src",a(this).data("to")),a(this).data("caption")?a("#modallery-caption").html(a(this).data("caption")):a("#modallery-caption").html(""),f.navigate&&(a(".navigator-btn").removeClass("highlighted"),a('.navigator-btn[data-ref="'+a(this).data("to")+'"]').addClass("highlighted"),c=parseInt(a('.navigator-btn[data-ref="'+a(this).data("to")+'"]').data("code"))),a("#mdlyModal").modal("show")}),a(".navigator-btn").on("click",function(){var b=a('img[data-to="'+a(this).data("ref")+'"]');c=parseInt(a(this).data("code")),a("#mdlyLabel").html(f.title),a("#modallery-img").attr("src",b.data("to")),b.data("caption")?a("#modallery-caption").html(b.data("caption")):a("#modallery-caption").html(""),a(".navigator-btn").removeClass("highlighted"),a(this).addClass("highlighted")});var h=function(){if(c>1){c-=1;var b=a("button[data-code="+c+"] > img").attr("src"),d=a(f.caller+'[src="'+b+'"]');a("#mdlyLabel").html(f.title),a("#modallery-img").attr("src",d.data("to")),d.data("caption")?a("#modallery-caption").html(d.data("caption")):a("#modallery-caption").html(""),a(".navigator-btn").removeClass("highlighted"),a("button[data-code="+c+"]").addClass("highlighted")}},i=function(){if(c<d-1){c+=1;var b=a("button[data-code="+c+"] > img").attr("src"),e=a(f.caller+'[src="'+b+'"]');a("#mdlyLabel").html(f.title),a("#modallery-img").attr("src",e.data("to")),e.data("caption")?a("#modallery-caption").html(e.data("caption")):a("#modallery-caption").html(""),a(".navigator-btn").removeClass("highlighted"),a("button[data-code="+c+"]").addClass("highlighted")}};a("#nextMdly").on("click",i),a("#previousMdly").on("click",h),f.keypress&&a(document).keydown(function(a){37==a.which&&h(),39==a.which&&i()})}}(jQuery);
